{"ast":null,"code":"import { addParkingData, getVehicleList } from \"./api.js\";\nexport default {\n  name: \"add\",\n  components: {},\n  data() {\n    return {\n      submitLoading: false,\n      // 表单提交状态\n      form: {\n        // 添加或编辑表单对象初始化数据\n        carId: \"\",\n        carNumber: \"\",\n        owner: \"\",\n        startTime: \"\",\n        endTime: \"\",\n        cost: 0,\n        startTime1: \"\",\n        startTime2: \"\",\n        endTime1: \"\",\n        endTime2: \"\"\n      },\n      // 表单验证规则\n      formValidate: {},\n      vehicleList: []\n    };\n  },\n  methods: {\n    init() {\n      this.getVehicleListFx();\n    },\n    changeStartTime1(e) {\n      this.form.startTime1 = e;\n    },\n    changeStartTime2(e) {\n      this.form.startTime2 = e;\n    },\n    changeEndTime1(e) {\n      this.form.endTime1 = e;\n    },\n    changeEndTime2(e) {\n      this.form.endTime2 = e;\n    },\n    getVehicleListFx() {\n      var that = this;\n      that.vehicleList = [];\n      getVehicleList().then(res => {\n        if (res.success) {\n          that.vehicleList = res.result;\n        }\n      });\n    },\n    handleReset() {\n      this.$refs.form.resetFields();\n    },\n    handleSubmit() {\n      this.$refs.form.validate(valid => {\n        if (valid) {\n          this.form.startTime = this.form.startTime1 + \" \" + this.form.startTime2;\n          this.form.endTime = this.form.endTime1 + \" \" + this.form.endTime2;\n          addParkingData(this.form).then(res => {\n            this.submitLoading = false;\n            if (res.success) {\n              this.$Message.success(\"操作成功\");\n              this.submited();\n            }\n          });\n        }\n      });\n    },\n    close() {\n      this.$emit(\"close\", true);\n    },\n    submited() {\n      this.$emit(\"submited\", true);\n    }\n  },\n  mounted() {\n    this.init();\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}