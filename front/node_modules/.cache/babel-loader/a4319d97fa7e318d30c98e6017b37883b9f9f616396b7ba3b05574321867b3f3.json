{"ast":null,"code":"import Vue from 'vue';\nimport ViewUI from 'view-design';\nimport Util from '../libs/util';\nimport VueRouter from 'vue-router';\nimport Cookies from 'js-cookie';\nimport { routers } from './router';\n// 引入新的组件\nimport ParkingSpace from '@/views/ParkingSpace.vue';\nVue.use(VueRouter);\nconst routerPush = VueRouter.prototype.push;\nVueRouter.prototype.push = function push(location) {\n  return routerPush.call(this, location).catch(error => error);\n};\n\n// 添加新的路由到 routers 数组中\nconst newRouters = [...routers, {\n  path: '/parking-space',\n  name: 'ParkingSpace',\n  component: ParkingSpace\n}];\nconst RouterConfig = {\n  // mode: 'history',\n  routes: newRouters // 使用新的路由数组\n};\nexport const router = new VueRouter(RouterConfig);\nrouter.beforeEach((to, from, next) => {\n  ViewUI.LoadingBar.start();\n  Util.title(to.meta.title);\n  var name = to.name;\n  if (Cookies.get('locking') == '1' && name !== 'locking') {\n    next({\n      replace: true,\n      name: 'locking'\n    });\n  } else if (Cookies.get('locking') == '0' && name == 'locking') {\n    next(false);\n  } else {\n    if (!Cookies.get('userInfo') && name != 'login' && name != 'regist') {\n      next({\n        name: 'login'\n      });\n    } else if (Cookies.get('userInfo') && name == 'login') {\n      Util.title();\n      next({\n        name: 'home_index'\n      });\n    } else {\n      Util.toDefaultPage([...newRouters], name, router, next); // 使用新的路由数组\n    }\n  }\n});\nrouter.afterEach(to => {\n  Util.openNewPage(router.app, to.name, to.params, to.query);\n  ViewUI.LoadingBar.finish();\n  window.scrollTo(0, 0);\n});","map":{"version":3,"names":["Vue","ViewUI","Util","VueRouter","Cookies","routers","ParkingSpace","use","routerPush","prototype","push","location","call","catch","error","newRouters","path","name","component","RouterConfig","routes","router","beforeEach","to","from","next","LoadingBar","start","title","meta","get","replace","toDefaultPage","afterEach","openNewPage","app","params","query","finish","window","scrollTo"],"sources":["E:/Code/front/src/router/index.js"],"sourcesContent":["import Vue from 'vue';\r\nimport ViewUI from 'view-design';\r\nimport Util from '../libs/util';\r\nimport VueRouter from 'vue-router';\r\nimport Cookies from 'js-cookie';\r\nimport { routers } from './router';\r\n// 引入新的组件\r\nimport ParkingSpace from '@/views/ParkingSpace.vue';\r\n\r\nVue.use(VueRouter);\r\nconst routerPush = VueRouter.prototype.push\r\nVueRouter.prototype.push = function push(location) {\r\n  return routerPush.call(this, location).catch(error => error)\r\n}\r\n\r\n// 添加新的路由到 routers 数组中\r\nconst newRouters = [\r\n  ...routers,\r\n  {\r\n    path: '/parking-space',\r\n    name: 'ParkingSpace',\r\n    component: ParkingSpace\r\n  }\r\n];\r\n\r\nconst RouterConfig = {\r\n  // mode: 'history',\r\n  routes: newRouters // 使用新的路由数组\r\n};\r\n\r\nexport const router = new VueRouter(RouterConfig);\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n  ViewUI.LoadingBar.start();\r\n  Util.title(to.meta.title);\r\n  var name = to.name;\r\n  if (Cookies.get('locking') == '1' && name !== 'locking') {\r\n    next({\r\n      replace: true,\r\n      name: 'locking'\r\n    });\r\n  } else if (Cookies.get('locking') == '0' && name == 'locking') {\r\n    next(false);\r\n  } else {\r\n    if (!Cookies.get('userInfo') && (name != 'login' && name != 'regist')) {\r\n      next({\r\n        name: 'login'\r\n      });\r\n    } else if (Cookies.get('userInfo') && name == 'login') {\r\n      Util.title();\r\n      next({\r\n        name: 'home_index'\r\n      });\r\n    } else {\r\n      Util.toDefaultPage([...newRouters], name, router, next); // 使用新的路由数组\r\n    }\r\n  }\r\n});\r\n\r\nrouter.afterEach((to) => {\r\n  Util.openNewPage(router.app, to.name, to.params, to.query);\r\n  ViewUI.LoadingBar.finish();\r\n  window.scrollTo(0, 0);\r\n});"],"mappings":"AAAA,OAAOA,GAAG,MAAM,KAAK;AACrB,OAAOC,MAAM,MAAM,aAAa;AAChC,OAAOC,IAAI,MAAM,cAAc;AAC/B,OAAOC,SAAS,MAAM,YAAY;AAClC,OAAOC,OAAO,MAAM,WAAW;AAC/B,SAASC,OAAO,QAAQ,UAAU;AAClC;AACA,OAAOC,YAAY,MAAM,0BAA0B;AAEnDN,GAAG,CAACO,GAAG,CAACJ,SAAS,CAAC;AAClB,MAAMK,UAAU,GAAGL,SAAS,CAACM,SAAS,CAACC,IAAI;AAC3CP,SAAS,CAACM,SAAS,CAACC,IAAI,GAAG,SAASA,IAAIA,CAACC,QAAQ,EAAE;EACjD,OAAOH,UAAU,CAACI,IAAI,CAAC,IAAI,EAAED,QAAQ,CAAC,CAACE,KAAK,CAACC,KAAK,IAAIA,KAAK,CAAC;AAC9D,CAAC;;AAED;AACA,MAAMC,UAAU,GAAG,CACjB,GAAGV,OAAO,EACV;EACEW,IAAI,EAAE,gBAAgB;EACtBC,IAAI,EAAE,cAAc;EACpBC,SAAS,EAAEZ;AACb,CAAC,CACF;AAED,MAAMa,YAAY,GAAG;EACnB;EACAC,MAAM,EAAEL,UAAU,CAAC;AACrB,CAAC;AAED,OAAO,MAAMM,MAAM,GAAG,IAAIlB,SAAS,CAACgB,YAAY,CAAC;AAEjDE,MAAM,CAACC,UAAU,CAAC,CAACC,EAAE,EAAEC,IAAI,EAAEC,IAAI,KAAK;EACpCxB,MAAM,CAACyB,UAAU,CAACC,KAAK,CAAC,CAAC;EACzBzB,IAAI,CAAC0B,KAAK,CAACL,EAAE,CAACM,IAAI,CAACD,KAAK,CAAC;EACzB,IAAIX,IAAI,GAAGM,EAAE,CAACN,IAAI;EAClB,IAAIb,OAAO,CAAC0B,GAAG,CAAC,SAAS,CAAC,IAAI,GAAG,IAAIb,IAAI,KAAK,SAAS,EAAE;IACvDQ,IAAI,CAAC;MACHM,OAAO,EAAE,IAAI;MACbd,IAAI,EAAE;IACR,CAAC,CAAC;EACJ,CAAC,MAAM,IAAIb,OAAO,CAAC0B,GAAG,CAAC,SAAS,CAAC,IAAI,GAAG,IAAIb,IAAI,IAAI,SAAS,EAAE;IAC7DQ,IAAI,CAAC,KAAK,CAAC;EACb,CAAC,MAAM;IACL,IAAI,CAACrB,OAAO,CAAC0B,GAAG,CAAC,UAAU,CAAC,IAAKb,IAAI,IAAI,OAAO,IAAIA,IAAI,IAAI,QAAS,EAAE;MACrEQ,IAAI,CAAC;QACHR,IAAI,EAAE;MACR,CAAC,CAAC;IACJ,CAAC,MAAM,IAAIb,OAAO,CAAC0B,GAAG,CAAC,UAAU,CAAC,IAAIb,IAAI,IAAI,OAAO,EAAE;MACrDf,IAAI,CAAC0B,KAAK,CAAC,CAAC;MACZH,IAAI,CAAC;QACHR,IAAI,EAAE;MACR,CAAC,CAAC;IACJ,CAAC,MAAM;MACLf,IAAI,CAAC8B,aAAa,CAAC,CAAC,GAAGjB,UAAU,CAAC,EAAEE,IAAI,EAAEI,MAAM,EAAEI,IAAI,CAAC,CAAC,CAAC;IAC3D;EACF;AACF,CAAC,CAAC;AAEFJ,MAAM,CAACY,SAAS,CAAEV,EAAE,IAAK;EACvBrB,IAAI,CAACgC,WAAW,CAACb,MAAM,CAACc,GAAG,EAAEZ,EAAE,CAACN,IAAI,EAAEM,EAAE,CAACa,MAAM,EAAEb,EAAE,CAACc,KAAK,CAAC;EAC1DpC,MAAM,CAACyB,UAAU,CAACY,MAAM,CAAC,CAAC;EAC1BC,MAAM,CAACC,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;AACvB,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}